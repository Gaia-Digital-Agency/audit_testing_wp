# Understanding Your Audit Reports

This guide explains where to find the reports generated by your new automated quality assurance workflow.

## 1. The Terminal (For the Developer, in Real-Time)

*   **What it is:** This is the report for **Pillar 1 (Local Pre-Commit Hooks)**.
*   **When to look:** When you run `git commit`.
*   **What you get:** Instant success or failure. If a check fails, you get an error message telling you exactly what to fix in your code. This report is for the developer to ensure they're not committing broken or poorly formatted code.

## 2. GitHub Actions (The Central Dashboard for the Team)

This is the main place where you'll consolidate and review reports for **Pillar 2 (Code Validation)** and **Pillar 3 (Live Audit)**. When you go to the **"Actions"** tab for a specific workflow run, you'll find everything you need.

Inside the GitHub Actions logs, you will find the results for:

*   **Lighthouse:** The `live-audit` job log will give you a **URL** to the full, interactive Lighthouse report. This is the most detailed performance and accessibility report you'll get. The PDF artifact you configured is also generated from this and can be downloaded from the main Actions summary page.
*   **WPScan:** The `live-audit` job log will show the full WPScan output directly. It will list any vulnerabilities found in your WordPress core, themes, or plugins.
*   **Code Linters (Pillar 2):** The logs for the `php-lint` and `frontend-lint-and-audit` jobs will show the pass/fail status and any specific errors found during a pull request.

### Summary

Your **Terminal** is for your personal, instant feedback. **GitHub Actions** is the central hub for the team where the detailed Lighthouse and WPScan reports are generated and stored after every deployment to `main`.

# Implementation and Testing Guide

Here is a guide to help you implement the files and test the entire workflow from end to end.

## Step 1: Place Your Files and Configure Your Project

First, let's get all the files in the right place within your local WordPress project folder.

1.  **Place the GitHub Actions Workflow:**
    *   In the root of your project, create a folder named `.github`.
    *   Inside `.github`, create another folder named `workflows`.
    *   Copy your `frontend-ci-wp.yml` file into the `.github/workflows` folder.
    *   Your final path should be: `<project_root>/.github/workflows/frontend-ci-wp.yml`

2.  **Place the Documentation Files:**
    *   In the root of your project, create a new folder, for example, `quality_audit`.
    *   Copy all your markdown files (`audit_steps_wp.md`, `manual_check_template.md`, etc.) into this `quality_audit` folder. This keeps your project organized.

3.  **Configure the Workflow File:**
    *   Open `.github/workflows/frontend-ci-wp.yml`.
    *   In the `live-audit` job, replace both instances of `YOUR_SITE_URL` with the actual URL of your live WordPress site.

4.  **Install Local Dependencies (Pillar 1):**
    *   Open your terminal in the project root.
    *   Run the installation commands from `audit_steps_wp.md` to get the tools for your pre-commit hooks:
        ```bash
        # For PHP checks
        composer require --dev "wp-coding-standards/wpcs:^3.0"

        # For Git hooks
        npm install --save-dev husky lint-staged
        ```

5.  **Activate Pre-Commit Hooks (Pillar 1):**
    *   Run these two commands in your terminal to set up the Git hooks:
        ```bash
        npx husky install
        npx husky add .husky/pre-commit "npx lint-staged"
        ```
    *   Ensure the `lint-staged` configuration from `audit_steps_wp.md` is in your `package.json`.

6.  **Add the GitHub Secret (Pillar 3):**
    *   Go to your project's repository on GitHub.
    *   Navigate to `Settings` > `Secrets and variables` > `Actions`.
    *   Click `New repository secret`.
    *   Name the secret `WPSCAN_API_TOKEN`.
    *   Paste your API token from WPScan into the "Secret" field and save it.

You are now fully set up!

## Step 2: How to Test Your New Audit System

Let's walk through a test run to see everything in action.

### Test 1: See Pillar 1 (Local Hooks) Work

1.  Open any `.php` file in your theme/plugin.
2.  Intentionally make a formatting error that violates WordPress standards (e.g., add extra spaces after a function parenthesis).
3.  Save the file.
4.  In your terminal, try to commit this change:
    ```bash
    git add .
    git commit -m "test: intentional PHP error"
    ```
5.  **Observe the Result:** The commit will **fail**. Your terminal will show an error message from `phpcs` telling you exactly what's wrong. This is Pillar 1 protecting your codebase.
6.  Now, fix the error and commit again. This time, it will succeed.

### Test 2: See Pillar 2 (Pull Request Checks) Work

1.  Create and switch to a new branch:
    ```bash
    git checkout -b feature/test-ci-pipeline
    ```
2.  Push your successful commit to GitHub:
    ```bash
    git push -u origin feature/test-ci-pipeline
    ```
3.  Go to your repository on GitHub and **open a new Pull Request** from the `feature/test-ci-pipeline` branch to your `main` branch.
4.  **Observe the Result:** On the Pull Request page, you will see the GitHub Actions running. The `PHP Lint` and `Frontend Lint & Audit` jobs will start. Once they complete with green checkmarks (âœ…), you know Pillar 2 has successfully validated your code.

### Test 3: See Pillar 3 (Live Audit) and PDF Reports Work

1.  **Merge the Pull Request** you just created into the `main` branch.
2.  Go to the **"Actions"** tab of your repository.
3.  You will see a new workflow run has started because you pushed to `main`.
4.  Wait for all the jobs to complete. The `live-audit` job will now run.
5.  **Observe the Result:**
    *   Click on the completed workflow run, then click on the `live-audit` job.
    *   In the logs for the `Run Lighthouse CI` step, you will find a **URL** to your full, interactive Lighthouse report.
    *   In the logs for the `Run WPScan for Vulnerabilities` step, you will see the security scan results.
    *   Go back to the **"Summary"** page for the workflow run. At the bottom, under **"Artifacts"**, you will find `lighthouse-scan-report-pdf`. You can download this to get your PDF report.
